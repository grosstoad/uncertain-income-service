openapi: 3.0.3
info:
  title: athena-svc-uncertain-income
  description: Calculates allowable uncertain income amounts for various income types using Australian financial year calculations
  version: 1.0.0
tags:
  - name: Uncertain Income
    description: Uncertain Income Calculations
  - name: Team
    description: The Orcas
paths:
  /api/uncertain-income/v1/calculate:
    post:
      summary: /v1/calculate
      description: Calculate allowable uncertain income amount for any supported income type and verification method combination
      requestBody:
        content:
          application/json:
            schema:
              title: Uncertain Income Request
              type: object
              required:
                - incomeType
              properties:
                incomeType:
                  title: Income Type
                  type: string
                  enum:
                    - OVERTIME
                    - CASUAL
                    - CONTRACT_VARIABLE
                    - COMMISSIONS
                    - BONUS
                    - INVESTMENT_SHARES
                    - INVESTMENT_INTEREST
              allOf:
                - if:
                    properties:
                      incomeType:
                        const: OVERTIME
                  then:
                    required:
                      - verificationMethod
                      - salaryFrequency
                      - baseIncome
                      - endDateLatestPayslip
                      - employmentStartDate
                      - ytdAmountLatestPayslip
                    properties:
                      verificationMethod:
                        type: string
                        enum:
                          - NON_ESSENTIAL_SERVICES
                          - ESSENTIAL_SERVICES
                      salaryFrequency:
                        title: Salary Frequency
                        type: string
                        enum:
                          - WEEKLY
                          - FORTNIGHTLY
                          - MONTHLY
                      baseIncome:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Base salary amount per pay period
                      endDateLatestPayslip:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: End date of latest payslip in YYYY-MM-DD format
                      employmentStartDate:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: Employment start date in YYYY-MM-DD format
                      ytdAmountLatestPayslip:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Year-to-date amount shown on latest payslip
                      lastFyAnnualIncome:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Last financial year annual income (optional)
                      annualOverrideAmount:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Manual override amount (optional)
                - if:
                    properties:
                      incomeType:
                        enum:
                          - CASUAL
                          - CONTRACT_VARIABLE
                  then:
                    required:
                      - salaryFrequency
                      - endDateLatestPayslip
                      - employmentStartDate
                      - ytdAmountLatestPayslip
                    properties:
                      salaryFrequency:
                        title: Salary Frequency
                        type: string
                        enum:
                          - WEEKLY
                          - FORTNIGHTLY
                          - MONTHLY
                      endDateLatestPayslip:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: End date of latest payslip in YYYY-MM-DD format
                      employmentStartDate:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: Employment start date in YYYY-MM-DD format
                      ytdAmountLatestPayslip:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Year-to-date amount shown on latest payslip
                      lastFyAnnualIncome:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Last financial year annual income (optional)
                      annualOverrideAmount:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Manual override amount (optional)
                - if:
                    properties:
                      incomeType:
                        const: COMMISSIONS
                  then:
                    required:
                      - salaryFrequency
                      - baseIncome
                      - endDateLatestPayslip
                      - employmentStartDate
                      - ytdAmountLatestPayslip
                    properties:
                      salaryFrequency:
                        title: Salary Frequency
                        type: string
                        enum:
                          - WEEKLY
                          - FORTNIGHTLY
                          - MONTHLY
                      baseIncome:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Base salary amount per pay period
                      endDateLatestPayslip:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: End date of latest payslip in YYYY-MM-DD format
                      employmentStartDate:
                        type: string
                        pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                        description: Employment start date in YYYY-MM-DD format
                      ytdAmountLatestPayslip:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Year-to-date amount shown on latest payslip
                      lastFyAnnualIncome:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Last financial year annual income (optional)
                      annualOverrideAmount:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Manual override amount (optional)
                      actualYtdCommission:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Actual year-to-date commission if known (optional)
                - if:
                    properties:
                      incomeType:
                        const: BONUS
                  then:
                    required:
                      - verificationMethod
                      - currentFyBonus
                    properties:
                      verificationMethod:
                        type: string
                        enum:
                          - ONE_YEAR_VERIFICATION
                          - TWO_YEAR_VERIFICATION
                      currentFyBonus:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Current financial year bonus amount
                      lastFyBonus:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Last financial year bonus amount (optional)
                - if:
                    properties:
                      incomeType:
                        enum:
                          - INVESTMENT_SHARES
                          - INVESTMENT_INTEREST
                  then:
                    required:
                      - currentFy
                      - lastFy
                    properties:
                      currentFy:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Current financial year investment income
                      lastFy:
                        type: number
                        minimum: 0
                        maximum: 99999999.99
                        multipleOf: 0.01
                        description: Last financial year investment income
            examples:
              overtime_non_essential:
                summary: OVERTIME - Non-Essential Services
                value:
                  incomeType: OVERTIME
                  verificationMethod: NON_ESSENTIAL_SERVICES
                  salaryFrequency: FORTNIGHTLY
                  baseIncome: 2000
                  endDateLatestPayslip: '2025-06-01'
                  employmentStartDate: '2024-07-01'
                  ytdAmountLatestPayslip: 150000
              bonus_one_year:
                summary: BONUS - One Year Verification
                value:
                  incomeType: BONUS
                  verificationMethod: ONE_YEAR_VERIFICATION
                  currentFyBonus: 50000
              investment_shares:
                summary: INVESTMENT_SHARES
                value:
                  incomeType: INVESTMENT_SHARES
                  currentFy: 25000
                  lastFy: 30000
        required: true
      responses:
        '200':
          description: Successful calculation
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
            X-Athena-RequestID:
              schema:
                type: string
          content:
            application/json:
              schema:
                title: Uncertain Income Response
                type: object
                required:
                  - success
                  - data
                  - versions
                properties:
                  success:
                    type: boolean
                    const: true
                    description: Indicates successful calculation
                  data:
                    type: object
                    required:
                      - incomeType
                      - allowableAnnualIncome
                      - calculationDetails
                      - eligible
                    properties:
                      incomeType:
                        title: Income Type
                        type: string
                        enum:
                          - OVERTIME
                          - CASUAL
                          - CONTRACT_VARIABLE
                          - COMMISSIONS
                          - BONUS
                          - INVESTMENT_SHARES
                          - INVESTMENT_INTEREST
                        description: The income type that was calculated
                      verificationMethod:
                        description: The verification method used (if applicable)
                        title: Verification Method
                        type: string
                        enum:
                          - NON_ESSENTIAL_SERVICES
                          - ESSENTIAL_SERVICES
                          - ONE_YEAR_VERIFICATION
                          - TWO_YEAR_VERIFICATION
                      allowableAnnualIncome:
                        type: number
                        minimum: 0
                        description: Final calculated allowable annual income amount
                      calculationDetails:
                        description: Detailed breakdown of calculation steps
                        title: Calculation Details
                        type: object
                        properties:
                          annualBaseSalary:
                            type: number
                            description: Calculated annual base salary (baseIncome × frequency multiplier)
                          expectedYtdBaseSalary:
                            type: number
                            description: Expected year-to-date base salary based on employment period
                          daysPayCycleConversion:
                            type: number
                            description: Number of pay cycles calculated from employment period
                          averageAmountPerPayCycle:
                            type: number
                            description: Average amount per pay cycle (YTD amount ÷ pay cycles)
                          averageAmountLessBaseIncomeAnnual:
                            type: number
                            description: Annual amount after subtracting base income component
                          averageAmountLessBaseIncomeMonthly:
                            type: number
                            description: Monthly amount after subtracting base income component
                      eligible:
                        type: boolean
                        description: Whether the income meets eligibility requirements
                  versions:
                    type: object
                    required:
                      - api
                      - logic
                    properties:
                      api:
                        type: string
                        description: API version number
                        example: 1.0.0
                      logic:
                        type: string
                        description: Calculation logic version
                        example: '2025.1'
              examples:
                overtime_success:
                  summary: OVERTIME Calculation Success
                  value:
                    success: true
                    data:
                      incomeType: OVERTIME
                      verificationMethod: NON_ESSENTIAL_SERVICES
                      allowableAnnualIncome: 110500
                      calculationDetails:
                        annualBaseSalary: 52000
                        expectedYtdBaseSalary: 48000
                        daysPayCycleConversion: 24
                        averageAmountPerPayCycle: 6250
                        averageAmountLessBaseIncomeAnnual: 110500
                        averageAmountLessBaseIncomeMonthly: 9208.33
                      eligible: true
                    versions:
                      api: 1.0.0
                      logic: '2025.1'
        '400':
          description: Bad Request - Validation errors
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
            X-Athena-RequestID:
              schema:
                type: string
          content:
            application/json:
              schema:
                title: Error Response
                type: object
                required:
                  - success
                  - errors
                  - timestamp
                  - requestId
                properties:
                  success:
                    type: boolean
                    const: false
                    description: Indicates failed request
                  errors:
                    type: array
                    description: Array of error details
                    items:
                      type: object
                      required:
                        - code
                        - message
                      properties:
                        field:
                          type: string
                          description: Field name that caused the error (if applicable)
                        code:
                          type: string
                          description: Error code for programmatic handling
                          enum:
                            - INVALID_JSON_SYNTAX
                            - MISSING_REQUIRED_FIELD
                            - INVALID_DATA_TYPE
                            - INVALID_DATE_FORMAT
                            - INVALID_ENUM_VALUE
                            - OUT_OF_RANGE
                            - INVALID_DECIMAL_PRECISION
                            - FUTURE_DATE
                            - INVALID_DATE_RANGE
                            - MISSING_LAST_FY_INCOME
                            - MISSING_LAST_FY_BONUS
                            - INSUFFICIENT_EMPLOYMENT_DURATION
                            - ZERO_PAY_CYCLES
                            - NEGATIVE_CALCULATED_VALUE
                            - INVALID_COMBINATION
                            - EXCESSIVE_DECIMAL_PRECISION
                            - CALCULATION_ENGINE_ERROR
                            - DATABASE_ERROR
                            - FINANCIAL_YEAR_CONFIG_ERROR
                            - VERSION_MISMATCH_ERROR
                            - INTERNAL_SERVER_ERROR
                            - INVALID_INPUT
                        message:
                          type: string
                          description: Human-readable error message
                        value:
                          oneOf:
                            - type: string
                            - type: number
                            - type: 'null'
                          description: The invalid value that caused the error (if applicable)
                        path:
                          type: string
                          description: JSON path to the field that caused the error (if applicable)
                          example: $.baseIncome
                  timestamp:
                    type: string
                    format: date-time
                    description: ISO 8601 timestamp when the error occurred
                  requestId:
                    type: string
                    description: Unique identifier for this request for debugging purposes
              examples:
                validation_error:
                  summary: Validation Error
                  value:
                    success: false
                    errors:
                      - field: baseIncome
                        code: MISSING_REQUIRED_FIELD
                        message: Required field 'baseIncome' is missing or empty
                        path: $.baseIncome
                    timestamp: '2025-06-21T10:30:00.123Z'
                    requestId: req_123456789
        '422':
          description: Unprocessable Entity - Business logic errors
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
            X-Athena-RequestID:
              schema:
                type: string
          content:
            application/json:
              schema:
                title: Error Response
                type: object
                required:
                  - success
                  - errors
                  - timestamp
                  - requestId
                properties:
                  success:
                    type: boolean
                    const: false
                    description: Indicates failed request
                  errors:
                    type: array
                    description: Array of error details
                    items:
                      type: object
                      required:
                        - code
                        - message
                      properties:
                        field:
                          type: string
                          description: Field name that caused the error (if applicable)
                        code:
                          type: string
                          description: Error code for programmatic handling
                          enum:
                            - INVALID_JSON_SYNTAX
                            - MISSING_REQUIRED_FIELD
                            - INVALID_DATA_TYPE
                            - INVALID_DATE_FORMAT
                            - INVALID_ENUM_VALUE
                            - OUT_OF_RANGE
                            - INVALID_DECIMAL_PRECISION
                            - FUTURE_DATE
                            - INVALID_DATE_RANGE
                            - MISSING_LAST_FY_INCOME
                            - MISSING_LAST_FY_BONUS
                            - INSUFFICIENT_EMPLOYMENT_DURATION
                            - ZERO_PAY_CYCLES
                            - NEGATIVE_CALCULATED_VALUE
                            - INVALID_COMBINATION
                            - EXCESSIVE_DECIMAL_PRECISION
                            - CALCULATION_ENGINE_ERROR
                            - DATABASE_ERROR
                            - FINANCIAL_YEAR_CONFIG_ERROR
                            - VERSION_MISMATCH_ERROR
                            - INTERNAL_SERVER_ERROR
                            - INVALID_INPUT
                        message:
                          type: string
                          description: Human-readable error message
                        value:
                          oneOf:
                            - type: string
                            - type: number
                            - type: 'null'
                          description: The invalid value that caused the error (if applicable)
                        path:
                          type: string
                          description: JSON path to the field that caused the error (if applicable)
                          example: $.baseIncome
                  timestamp:
                    type: string
                    format: date-time
                    description: ISO 8601 timestamp when the error occurred
                  requestId:
                    type: string
                    description: Unique identifier for this request for debugging purposes
              examples:
                business_logic_error:
                  summary: Business Logic Error
                  value:
                    success: false
                    errors:
                      - field: employmentDuration
                        code: INSUFFICIENT_EMPLOYMENT_DURATION
                        message: Employment duration of 120 days is less than required 180 days. Annual override amount required for eligibility
                        value: 120
                        path: $.calculated.employmentDuration
                    timestamp: '2025-06-21T10:30:00.123Z'
                    requestId: req_123456789
        '500':
          description: Internal Server Error
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
            X-Athena-RequestID:
              schema:
                type: string
          content:
            application/json:
              schema:
                title: Error Response
                type: object
                required:
                  - success
                  - errors
                  - timestamp
                  - requestId
                properties:
                  success:
                    type: boolean
                    const: false
                    description: Indicates failed request
                  errors:
                    type: array
                    description: Array of error details
                    items:
                      type: object
                      required:
                        - code
                        - message
                      properties:
                        field:
                          type: string
                          description: Field name that caused the error (if applicable)
                        code:
                          type: string
                          description: Error code for programmatic handling
                          enum:
                            - INVALID_JSON_SYNTAX
                            - MISSING_REQUIRED_FIELD
                            - INVALID_DATA_TYPE
                            - INVALID_DATE_FORMAT
                            - INVALID_ENUM_VALUE
                            - OUT_OF_RANGE
                            - INVALID_DECIMAL_PRECISION
                            - FUTURE_DATE
                            - INVALID_DATE_RANGE
                            - MISSING_LAST_FY_INCOME
                            - MISSING_LAST_FY_BONUS
                            - INSUFFICIENT_EMPLOYMENT_DURATION
                            - ZERO_PAY_CYCLES
                            - NEGATIVE_CALCULATED_VALUE
                            - INVALID_COMBINATION
                            - EXCESSIVE_DECIMAL_PRECISION
                            - CALCULATION_ENGINE_ERROR
                            - DATABASE_ERROR
                            - FINANCIAL_YEAR_CONFIG_ERROR
                            - VERSION_MISMATCH_ERROR
                            - INTERNAL_SERVER_ERROR
                            - INVALID_INPUT
                        message:
                          type: string
                          description: Human-readable error message
                        value:
                          oneOf:
                            - type: string
                            - type: number
                            - type: 'null'
                          description: The invalid value that caused the error (if applicable)
                        path:
                          type: string
                          description: JSON path to the field that caused the error (if applicable)
                          example: $.baseIncome
                  timestamp:
                    type: string
                    format: date-time
                    description: ISO 8601 timestamp when the error occurred
                  requestId:
                    type: string
                    description: Unique identifier for this request for debugging purposes
servers:
  - url: 'https://uncertain-income.athena-dev.com.au/api/uncertain-income'
    description: Dev server
  - url: 'https://uncertain-income.athena-test.com.au/api/uncertain-income'
    description: Test server
  - url: 'https://uncertain-income.athena.com.au/api/uncertain-income'
    description: Production server
components:
  schemas:
    UncertainIncomeRequestV1:
      title: Uncertain Income Request
      type: object
      required:
        - incomeType
      properties:
        incomeType:
          title: Income Type
          type: string
          enum:
            - OVERTIME
            - CASUAL
            - CONTRACT_VARIABLE
            - COMMISSIONS
            - BONUS
            - INVESTMENT_SHARES
            - INVESTMENT_INTEREST
      allOf:
        - if:
            properties:
              incomeType:
                const: OVERTIME
          then:
            required:
              - verificationMethod
              - salaryFrequency
              - baseIncome
              - endDateLatestPayslip
              - employmentStartDate
              - ytdAmountLatestPayslip
            properties:
              verificationMethod:
                type: string
                enum:
                  - NON_ESSENTIAL_SERVICES
                  - ESSENTIAL_SERVICES
              salaryFrequency:
                title: Salary Frequency
                type: string
                enum:
                  - WEEKLY
                  - FORTNIGHTLY
                  - MONTHLY
              baseIncome:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Base salary amount per pay period
              endDateLatestPayslip:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: End date of latest payslip in YYYY-MM-DD format
              employmentStartDate:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: Employment start date in YYYY-MM-DD format
              ytdAmountLatestPayslip:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Year-to-date amount shown on latest payslip
              lastFyAnnualIncome:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Last financial year annual income (optional)
              annualOverrideAmount:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Manual override amount (optional)
        - if:
            properties:
              incomeType:
                enum:
                  - CASUAL
                  - CONTRACT_VARIABLE
          then:
            required:
              - salaryFrequency
              - endDateLatestPayslip
              - employmentStartDate
              - ytdAmountLatestPayslip
            properties:
              salaryFrequency:
                title: Salary Frequency
                type: string
                enum:
                  - WEEKLY
                  - FORTNIGHTLY
                  - MONTHLY
              endDateLatestPayslip:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: End date of latest payslip in YYYY-MM-DD format
              employmentStartDate:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: Employment start date in YYYY-MM-DD format
              ytdAmountLatestPayslip:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Year-to-date amount shown on latest payslip
              lastFyAnnualIncome:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Last financial year annual income (optional)
              annualOverrideAmount:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Manual override amount (optional)
        - if:
            properties:
              incomeType:
                const: COMMISSIONS
          then:
            required:
              - salaryFrequency
              - baseIncome
              - endDateLatestPayslip
              - employmentStartDate
              - ytdAmountLatestPayslip
            properties:
              salaryFrequency:
                title: Salary Frequency
                type: string
                enum:
                  - WEEKLY
                  - FORTNIGHTLY
                  - MONTHLY
              baseIncome:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Base salary amount per pay period
              endDateLatestPayslip:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: End date of latest payslip in YYYY-MM-DD format
              employmentStartDate:
                type: string
                pattern: '^\\d{4}-\\d{2}-\\d{2}$'
                description: Employment start date in YYYY-MM-DD format
              ytdAmountLatestPayslip:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Year-to-date amount shown on latest payslip
              lastFyAnnualIncome:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Last financial year annual income (optional)
              annualOverrideAmount:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Manual override amount (optional)
              actualYtdCommission:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Actual year-to-date commission if known (optional)
        - if:
            properties:
              incomeType:
                const: BONUS
          then:
            required:
              - verificationMethod
              - currentFyBonus
            properties:
              verificationMethod:
                type: string
                enum:
                  - ONE_YEAR_VERIFICATION
                  - TWO_YEAR_VERIFICATION
              currentFyBonus:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Current financial year bonus amount
              lastFyBonus:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Last financial year bonus amount (optional)
        - if:
            properties:
              incomeType:
                enum:
                  - INVESTMENT_SHARES
                  - INVESTMENT_INTEREST
          then:
            required:
              - currentFy
              - lastFy
            properties:
              currentFy:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Current financial year investment income
              lastFy:
                type: number
                minimum: 0
                maximum: 99999999.99
                multipleOf: 0.01
                description: Last financial year investment income
    UncertainIncomeResponseV1:
      title: Uncertain Income Response
      type: object
      required:
        - success
        - data
        - versions
      properties:
        success:
          type: boolean
          const: true
          description: Indicates successful calculation
        data:
          type: object
          required:
            - incomeType
            - allowableAnnualIncome
            - calculationDetails
            - eligible
          properties:
            incomeType:
              title: Income Type
              type: string
              enum:
                - OVERTIME
                - CASUAL
                - CONTRACT_VARIABLE
                - COMMISSIONS
                - BONUS
                - INVESTMENT_SHARES
                - INVESTMENT_INTEREST
              description: The income type that was calculated
            verificationMethod:
              description: The verification method used (if applicable)
              title: Verification Method
              type: string
              enum:
                - NON_ESSENTIAL_SERVICES
                - ESSENTIAL_SERVICES
                - ONE_YEAR_VERIFICATION
                - TWO_YEAR_VERIFICATION
            allowableAnnualIncome:
              type: number
              minimum: 0
              description: Final calculated allowable annual income amount
            calculationDetails:
              description: Detailed breakdown of calculation steps
              title: Calculation Details
              type: object
              properties:
                annualBaseSalary:
                  type: number
                  description: Calculated annual base salary (baseIncome × frequency multiplier)
                expectedYtdBaseSalary:
                  type: number
                  description: Expected year-to-date base salary based on employment period
                daysPayCycleConversion:
                  type: number
                  description: Number of pay cycles calculated from employment period
                averageAmountPerPayCycle:
                  type: number
                  description: Average amount per pay cycle (YTD amount ÷ pay cycles)
                averageAmountLessBaseIncomeAnnual:
                  type: number
                  description: Annual amount after subtracting base income component
                averageAmountLessBaseIncomeMonthly:
                  type: number
                  description: Monthly amount after subtracting base income component
            eligible:
              type: boolean
              description: Whether the income meets eligibility requirements
        versions:
          type: object
          required:
            - api
            - logic
          properties:
            api:
              type: string
              description: API version number
              example: 1.0.0
            logic:
              type: string
              description: Calculation logic version
              example: '2025.1'
    ErrorResponseV1:
      title: Error Response
      type: object
      required:
        - success
        - errors
        - timestamp
        - requestId
      properties:
        success:
          type: boolean
          const: false
          description: Indicates failed request
        errors:
          type: array
          description: Array of error details
          items:
            type: object
            required:
              - code
              - message
            properties:
              field:
                type: string
                description: Field name that caused the error (if applicable)
              code:
                type: string
                description: Error code for programmatic handling
                enum:
                  - INVALID_JSON_SYNTAX
                  - MISSING_REQUIRED_FIELD
                  - INVALID_DATA_TYPE
                  - INVALID_DATE_FORMAT
                  - INVALID_ENUM_VALUE
                  - OUT_OF_RANGE
                  - INVALID_DECIMAL_PRECISION
                  - FUTURE_DATE
                  - INVALID_DATE_RANGE
                  - MISSING_LAST_FY_INCOME
                  - MISSING_LAST_FY_BONUS
                  - INSUFFICIENT_EMPLOYMENT_DURATION
                  - ZERO_PAY_CYCLES
                  - NEGATIVE_CALCULATED_VALUE
                  - INVALID_COMBINATION
                  - EXCESSIVE_DECIMAL_PRECISION
                  - CALCULATION_ENGINE_ERROR
                  - DATABASE_ERROR
                  - FINANCIAL_YEAR_CONFIG_ERROR
                  - VERSION_MISMATCH_ERROR
                  - INTERNAL_SERVER_ERROR
                  - INVALID_INPUT
              message:
                type: string
                description: Human-readable error message
              value:
                oneOf:
                  - type: string
                  - type: number
                  - type: 'null'
                description: The invalid value that caused the error (if applicable)
              path:
                type: string
                description: JSON path to the field that caused the error (if applicable)
                example: $.baseIncome
        timestamp:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the error occurred
        requestId:
          type: string
          description: Unique identifier for this request for debugging purposes
    IncomeType:
      title: Income Type
      type: string
      enum:
        - OVERTIME
        - CASUAL
        - CONTRACT_VARIABLE
        - COMMISSIONS
        - BONUS
        - INVESTMENT_SHARES
        - INVESTMENT_INTEREST
    VerificationMethod:
      title: Verification Method
      type: string
      enum:
        - NON_ESSENTIAL_SERVICES
        - ESSENTIAL_SERVICES
        - ONE_YEAR_VERIFICATION
        - TWO_YEAR_VERIFICATION
    SalaryFrequency:
      title: Salary Frequency
      type: string
      enum:
        - WEEKLY
        - FORTNIGHTLY
        - MONTHLY
    CalculationDetails:
      title: Calculation Details
      type: object
      description: Detailed breakdown of intermediate calculation steps
      properties:
        annualBaseSalary:
          type: number
          description: Calculated annual base salary (baseIncome × frequency multiplier)
        expectedYtdBaseSalary:
          type: number
          description: Expected year-to-date base salary based on employment period
        daysPayCycleConversion:
          type: number
          description: Number of pay cycles calculated from employment period
        averageAmountPerPayCycle:
          type: number
          description: Average amount per pay cycle (YTD amount ÷ pay cycles)
        averageAmountLessBaseIncomeAnnual:
          type: number
          description: Annual amount after subtracting base income component
        averageAmountLessBaseIncomeMonthly:
          type: number
          description: Monthly amount after subtracting base income component
